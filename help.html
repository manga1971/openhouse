<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ajutor – AudioForm</title>

  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#1e40af" />

  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <script src="https://cdn.tailwindcss.com"></script>

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-gray-50 text-gray-800 antialiased min-h-screen flex flex-col
             dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">
  
  <header class="p-4 bg-white shadow-md dark:bg-gray-800 sticky top-0 z-40">
    <a href="settings.html" class="flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200" aria-label="Înapoi la Setări">
      <i class="fas fa-arrow-left mr-2"></i>
      <h1 class="text-lg font-semibold text-center text-gray-900 dark:text-gray-50 flex-grow">Ajutor & Suport</h1>
    </a>
  </header>

  <main class="flex-grow max-w-3xl mx-auto p-6 space-y-10">
    <div id="plugin-slot-help-top" class="w-full">
      </div>

    <div id="feedback-message" data-testid="feedback-message-display" class="mt-4 text-sm text-center hidden p-3 rounded-lg"></div>

    <section class="bg-white dark:bg-gray-800 rounded-lg shadow p-6" data-testid="quick-guide-section">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100">Ghid Rapid de Utilizare</h2>
      <ol class="list-decimal list-inside space-y-3 text-gray-700 dark:text-gray-200">
        <li>Accesează <strong class="text-blue-600 dark:text-blue-400">„Creează Raport Nou”</strong> din Dashboard.</li>
        <li>Selectează un șablon personalizat sau unul implicit.</li>
        <li>Înregistrează descrierea verbală a inspecției/diagnosticului.</li>
        <li>Editează și verifică automat transcrierea generată.</li>
        <li>Exportă PDF-ul și trimite-l clientului sau arhivează-l.</li>
      </ol>
    </section>

    <section class="bg-white dark:bg-gray-800 rounded-lg shadow p-6" data-testid="faq-section">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100">Întrebări Frecvente (FAQ)</h2>
      <div class="space-y-4">
        <details class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm cursor-pointer transition-all duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-gray-600" data-testid="faq-item-offline">
          <summary class="font-semibold text-lg text-gray-800 dark:text-gray-100 flex items-center justify-between">
            Funcționează aplicația offline?
            <i class="fas fa-chevron-down text-gray-500 dark:text-gray-400 transition-transform duration-200"></i>
          </summary>
          <p class="mt-3 text-gray-700 dark:text-gray-200 leading-relaxed">Da, AudioForm funcționează în modul offline (PWA) după prima accesare. Datele sunt salvate local pe dispozitivul tău și se sincronizează automat (dacă ești conectat la un cont) sau rămân disponibile local când revii online.</p>
        </details>
        <details class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm cursor-pointer transition-all duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-gray-600" data-testid="faq-item-storage">
          <summary class="font-semibold text-lg text-gray-800 dark:text-gray-100 flex items-center justify-between">
            Unde se stochează rapoartele și șabloanele?
            <i class="fas fa-chevron-down text-gray-500 dark:text-gray-400 transition-transform duration-200"></i>
          </summary>
          <p class="mt-3 text-gray-700 dark:text-gray-200 leading-relaxed">În mod implicit, toate datele (rapoarte, șabloane, preferințe) sunt stocate în siguranță direct în <strong class="font-medium">browser-ul tău, folosind localStorage și IndexedDB</strong>. Aceasta asigură confidențialitate și funcționalitate offline. Nimic nu este trimis automat pe internet fără acordul tău explicit (ex: dacă alegi să sincronizezi cu un cont sau să exporti).</p>
        </details>
        <details class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm cursor-pointer transition-all duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-gray-600" data-testid="faq-item-reset">
          <summary class="font-semibold text-lg text-gray-800 dark:text-gray-100 flex items-center justify-between">
            Cum resetez complet aplicația și șterg toate datele?
            <i class="fas fa-chevron-down text-gray-500 dark:text-gray-400 transition-transform duration-200"></i>
          </summary>
          <p class="mt-3 text-gray-700 dark:text-gray-200 leading-relaxed">Poți șterge toate datele locale din AudioForm accesând <strong class="font-medium">Setări > Setări Cont > Șterge cont</strong>. Această acțiune va goli <strong class="font-medium">localStorage și IndexedDB</strong> și va șterge toate rapoartele și șabloanele salvate local. Asigură-te că ai exportat un backup dacă dorești să le păstrezi!</p>
        </details>
        <details class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm cursor-pointer transition-all duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-gray-600" data-testid="faq-item-microphone">
          <summary class="font-semibold text-lg text-gray-800 dark:text-gray-100 flex items-center justify-between">
            Ce tip de microfon este recomandat?
            <i class="fas fa-chevron-down text-gray-500 dark:text-gray-400 transition-transform duration-200"></i>
          </summary>
          <p class="mt-3 text-gray-700 dark:text-gray-200 leading-relaxed">Pentru cele mai bune rezultate de transcriere, recomandăm utilizarea unui microfon extern de calitate (ex: microfon lavalieră, căști cu microfon dedicat) sau a microfonului integrat al telefonului într-un mediu cu zgomot redus. Calitatea audio influențează direct acuratețea transcrierii AI.</p>
        </details>
      </div>
    </section>

    <section class="bg-white dark:bg-gray-800 rounded-lg shadow p-6" data-testid="contact-section">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100">Asistență și Contact</h2>
      <p class="text-gray-700 dark:text-gray-200 mb-4">Pentru întrebări suplimentare, probleme tehnice sau sugestii, suntem aici să te ajutăm:</p>
      <ul class="list-none space-y-3 text-gray-700 dark:text-gray-200">
        <li><i class="fas fa-envelope mr-3 text-blue-600 dark:text-blue-400"></i> Scrie-ne la: <a href="mailto:support@audioform.me" class="text-blue-600 dark:text-blue-400 hover:underline transition-colors duration-150" data-testid="support-email">support@audioform.me</a></li>
        <li><i class="fas fa-globe mr-3 text-blue-600 dark:text-blue-400"></i> Vizitează site-ul nostru: <a href="https://audioform.me" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline transition-colors duration-150" data-testid="website-link">audioform.me</a></li>
        <li><i class="fas fa-question-circle mr-3 text-blue-600 dark:text-blue-400"></i> Accesează <a href="dashboard.html" class="text-blue-600 dark:text-blue-400 hover:underline transition-colors duration-150" data-testid="return-to-dashboard-link">Dashboard</a> pentru a începe un nou raport.</li>
      </ul>
    </section>

    <section id="plugin-slot-help-bottom" class="w-full mt-10">
      </section>
  </main>

  <script>
    // Determine if debug mode is active globally
    const isDebugMode = location.search.includes('debug=true');

    // Helper for secure logging
    const secureLog = (message, ...args) => {
      if (isDebugMode) {
        console.log(`[DEBUG] ${message}`, ...args);
      }
    };

    // Show/Hide Feedback Message - Centralized utility function (reused from other pages)
    const feedbackMessageEl = document.getElementById('feedback-message');
    function showFeedback(message, type = 'success') {
        feedbackMessageEl.textContent = message;
        feedbackMessageEl.classList.remove('hidden', 'text-green-600', 'text-red-600', 'text-yellow-600', 'text-blue-600',
                                            'bg-green-50', 'bg-red-50', 'bg-yellow-50', 'bg-blue-50',
                                            'border-green-200', 'border-red-200', 'border-yellow-200', 'border-blue-200',
                                            'dark:text-green-400', 'dark:text-red-400', 'dark:text-yellow-400', 'dark:text-blue-400',
                                            'dark:bg-green-900', 'dark:bg-red-900', 'dark:bg-yellow-900', 'dark:bg-blue-900',
                                            'dark:border-green-700', 'dark:border-red-700', 'dark:border-yellow-700', 'dark:border-blue-700');
        if (type === 'success') {
            feedbackMessageEl.classList.add('text-green-600', 'bg-green-50', 'border-green-200', 'dark:text-green-400', 'dark:bg-green-900', 'dark:border-green-700');
        } else if (type === 'error') {
            feedbackMessageEl.classList.add('text-red-600', 'bg-red-50', 'border-red-200', 'dark:text-red-400', 'dark:bg-red-900', 'dark:border-red-700');
        } else if (type === 'warning') {
            feedbackMessageEl.classList.add('text-yellow-600', 'bg-yellow-50', 'border-yellow-200', 'dark:text-yellow-400', 'dark:bg-yellow-900', 'dark:border-yellow-700');
        } else if (type === 'info') {
            feedbackMessageEl.classList.add('text-blue-600', 'bg-blue-50', 'border-blue-200', 'dark:text-blue-400', 'dark:bg-blue-900', 'dark:border-blue-700');
        }
        feedbackMessageEl.classList.remove('hidden');
        // Hide after 5 seconds
        setTimeout(() => {
            feedbackMessageEl.classList.add('hidden');
        }, 5000);
    }


    document.addEventListener('DOMContentLoaded', () => {
      // Dark Mode Autodetect & Apply (reused from other pages)
      const applyDarkMode = () => {
        const darkPref = localStorage.getItem('pref_darkmode');
        document.documentElement.classList.toggle('dark', darkPref === 'true' || (darkPref === null && window.matchMedia('(prefers-color-scheme: dark)').matches));
      };
      applyDarkMode();
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyDarkMode);

      // PWA - Register Service Worker (reused from other pages)
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => secureLog('PWA ServiceWorker registered:', registration))
            .catch(error => console.error('PWA ServiceWorker registration failed:', error)); 
        });
      }

      // FAQ Accordion Functionality
      const faqDetails = document.querySelectorAll('details');
      faqDetails.forEach(detail => {
        detail.addEventListener('toggle', () => {
          const icon = detail.querySelector('summary i');
          if (icon) {
            if (detail.open) {
              icon.classList.remove('fa-chevron-down');
              icon.classList.add('fa-chevron-up');
            } else {
              icon.classList.remove('fa-chevron-up');
              icon.classList.add('fa-chevron-down');
            }
          }
        });
        // Initial state for icon
        const icon = detail.querySelector('summary i');
        if (icon) {
            icon.classList.add('fas', 'fa-chevron-down'); // Ensure icon is present and pointing down initially
        }
      });


      // Plugin slot handlers
      const pluginSlotHelpTop = document.getElementById('plugin-slot-help-top');
      const pluginSlotHelpBottom = document.getElementById('plugin-slot-help-bottom');

      if (window.AudioFormPlugin) {
        if (typeof window.AudioFormPlugin.renderHelpTop === 'function') {
          pluginSlotHelpTop.appendChild(window.AudioFormPlugin.renderHelpTop());
          secureLog('Plugin rendered in help top slot.');
        }
        if (typeof window.AudioFormPlugin.renderHelpBottom === 'function') {
          pluginSlotHelpBottom.appendChild(window.AudioFormPlugin.renderHelpBottom());
          secureLog('Plugin rendered in help bottom slot.');
        }
      }
      
      // Debug Mode Integration
      if (isDebugMode) {
        console.log('🧪 DEBUG MODE ACTIVAT pentru Help Page');
      }
    });
  </script>
</body>
</html>