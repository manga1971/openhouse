<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lum – Home</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="w-full flex justify-between items-center px-4 py-3 shadow fixed top-0 z-50">
        <h1 class="text-lg font-bold tracking-wider">Lum</h1>
        <div class="flex space-x-4 text-center">
            <button class="flex flex-col items-center text-xs" aria-label="View your rewards">
                <span class="text-xl">⭐</span> Rewards
            </button>
            <button class="flex flex-col items-center text-xs" aria-label="Chat with AI assistant">
                <span class="text-xl">🤖</span> AI Chat
            </button>
            <button class="flex flex-col items-center text-xs" aria-label="Access your account settings">
                <span class="text-xl">👤</span> Account
            </button>
        </div>
    </header>

    <main>
        <section class="mt-20 px-4 text-center">
            <div id="textSlider" aria-live="polite" class="rounded p-2 text-sm transition-opacity duration-500 ease-in-out opacity-100 min-h-[36px] flex items-center justify-center">
                Motto: strive for progress not perfection
            </div>
        </section>

        <section class="carousel-container relative">
            <div class="carousel px-4 mt-6 pb-4 flex overflow-x-scroll snap-x snap-mandatory" id="carousel">
                <a href="recommends.html" class="slide recommendations-slide rounded-lg shadow-lg flex flex-col justify-end" aria-label="Go to Recommendations section">
                    <h2 class="text-xl font-semibold mb-2">Recommends</h2>
                    <p class="text-sm">Personalized exercises and tips for your eyes.</p>
                </a>
                <a href="vision-test.html" class="slide lum-test-slide rounded-lg shadow-lg flex flex-col justify-between" aria-label="Take the Lum Vision Test">
                    <span class="date">Thursday, July 10</span>
                    <div>
                        <h2 class="text-xl font-semibold mb-2">Lum Test</h2>
                        <p class="text-sm">Take a quick test now and find out how your eyes are doing.</p>
                    </div>
                </a>
                <a href="reports.html" class="slide reports-slide rounded-lg shadow-lg flex flex-col justify-end" aria-label="View your progress reports">
                    <h2 class="text-xl font-semibold mb-2">Reports</h2>
                    <p class="text-sm">Visualize your test history and inner light progress.</p>
                </a>
                <a href="resources.html" class="slide resources-slide rounded-lg shadow-lg flex flex-col justify-end" aria-label="Explore resources for eye wellness">
                    <h2 class="text-xl font-semibold mb-2">Resources</h2>
                    <p class="text-sm">Visual, audio materials, and guides for eye wellness.</p>
                </a>
            </div>
            <div class="absolute inset-y-0 right-0 w-8 bg-gradient-to-l from-[var(--color-background)] to-transparent pointer-events-none flex items-center justify-center pr-2">
                <span class="text-2xl">→</span>
            </div>
        </section>

        <div class="flex justify-center space-x-2 mt-2" id="carousel-indicators">
        </div>

        <section class="text-center text-xs mt-4 px-4">
            Disclaimer: always consult a healthcare professional…
        </section>
    </main>

    <nav class="fixed bottom-0 left-0 w-full bg-white shadow-inner flex justify-around items-center h-16 z-50">
        <a href="index.html" class="nav-item flex flex-col items-center text-xs" id="nav-home" aria-label="Go to Home page">
            <span class="text-lg">🏠</span> Home
        </a>
        <a href="recommends.html" class="nav-item flex flex-col items-center text-xs" id="nav-recommends" aria-label="Go to Recommends page">
            <span class="text-lg">✅</span> Recommends
        </a>
        <a href="vision-test.html" class="nav-item flex flex-col items-center text-xs font-semibold active" id="nav-lum-test" aria-label="Go to Lum Test page">
            <span class="text-lg">👁️</span> Lum Test
        </a>
        <a href="reports.html" class="nav-item flex flex-col items-center text-xs" id="nav-reports" aria-label="Go to Reports page">
            <span class="text-lg">📈</span> Reports
        </a>
        <a href="resources.html" class="nav-item flex flex-col items-center text-xs" id="nav-resources" aria-label="Go to Resources page">
            <span class="text-lg">📚</span> Resources
        </a>
    </nav>

    <script>
        // --- Text Slider Logic ---
        // Messages for the Home page specific slider
        const homePageMessages = [
            "Motto: strive for progress not perfection",
            "Goal: cultivate light in your eyes every day",
            "Disclaimer: this app is for informational purposes only",
        ];
        let currentMessageIndex = 0;
        const textSliderElement = document.getElementById("textSlider");

        function updateTextSlider() {
            textSliderElement.classList.remove("opacity-100");
            textSliderElement.classList.add("opacity-0");

            setTimeout(() => {
                currentMessageIndex = (currentMessageIndex + 1) % homePageMessages.length;
                textSliderElement.textContent = homePageMessages[currentMessageIndex];
                textSliderElement.classList.remove("opacity-0");
                textSliderElement.classList.add("opacity-100");
            }, 500); // Duration of fade-out transition
        }

        setInterval(updateTextSlider, 4000); // Change text every 4 seconds
        updateTextSlider(); // Initial call to set the first message and start the cycle

        // --- Carousel Indicators Logic ---
        const carousel = document.getElementById('carousel');
        const indicatorsContainer = document.getElementById('carousel-indicators');
        const slides = carousel.querySelectorAll('.slide');
        const numSlides = slides.length;

        // Create indicators dynamically
        for (let i = 0; i < numSlides; i++) {
            const indicator = document.createElement('span');
            indicator.className = 'w-2 h-2 rounded-full cursor-pointer';
            indicator.setAttribute('data-slide-index', i);
            indicatorsContainer.appendChild(indicator);
        }

        const indicators = indicatorsContainer.children;

        function updateCarouselIndicators() {
            const scrollLeft = carousel.scrollLeft;
            // Get the actual width of the first slide including its right margin
            const firstSlide = slides[0];
            const slideWidth = firstSlide.offsetWidth + parseFloat(getComputedStyle(firstSlide).marginRight);
            
            // Calculate active index, considering potential partial scrolls
            const activeIndex = Math.round(scrollLeft / slideWidth);

            for (let i = 0; i < numSlides; i++) {
                if (i === activeIndex) {
                    indicators[i].classList.remove('bg-gray-300'); // Tailwind gray-300 for inactive
                    indicators[i].classList.add('bg-gray-400'); // Tailwind gray-400 for active
                } else {
                    indicators[i].classList.remove('bg-gray-400');
                    indicators[i].classList.add('bg-gray-300');
                }
            }
        }

        carousel.addEventListener('scroll', updateCarouselIndicators);
        // Initial call to set the correct indicator on load
        updateCarouselIndicators();

        // Allow clicking indicators to scroll carousel
        indicatorsContainer.addEventListener('click', (event) => {
            const clickedIndicator = event.target.closest('[data-slide-index]');
            if (clickedIndicator) {
                const slideIndex = parseInt(clickedIndicator.getAttribute('data-slide-index'));
                const slideWidth = slides[0].offsetWidth + parseFloat(getComputedStyle(slides[0]).marginRight);
                carousel.scrollTo({
                    left: slideIndex * slideWidth,
                    behavior: 'smooth'
                });
            }
        });

        // --- Navbar Active State Logic ---
        const navItems = document.querySelectorAll('.nav-item');

        function setActiveNavItem(id) {
            navItems.forEach(item => {
                item.classList.remove('active', 'font-semibold', 'text-orange-500', 'text-blue-600');
                item.classList.add('text-gray-700'); // Default inactive color
            });

            const activeItem = document.getElementById(id);
            if (activeItem) {
                activeItem.classList.add('active', 'font-semibold');
                // Use CSS variables defined in style.css or direct Tailwind classes for colors
                if (id === 'nav-lum-test') { // Changed from nav-liye-test
                    activeItem.classList.add('text-orange-500'); // Example: Use Tailwind orange for Lum Test
                } else {
                    // This color is now controlled by style.css for .nav-item.active
                    // If you want specific active colors for other items, add them here
                    // activeItem.classList.add('text-blue-600'); 
                }
                activeItem.classList.remove('text-gray-700'); // Remove inactive color
            }
        }

        // Set 'Lum Test' as active by default on Home page load for testing
        // In a real app, this would be determined by the current page URL
        setActiveNavItem('nav-lum-test');

        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                // For a multi-page application, let the default navigation happen
                // and the correct active state will be set on page load.
                // For demonstration, you could uncomment preventDefault:
                // e.preventDefault();
                // setActiveNavItem(item.id); // This would make it active immediately on click, but might be reset on page load.
            });
        });

    </script>
</body>
</html>
