<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LumiYE â€“ SpaÈ›iul TÄƒu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Stiluri generale pentru corp È™i HTML */
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden; /* Ascunde scrollbar-urile pentru efectul de carusel */
      font-family: 'Inter', sans-serif;
      color: #2E2E2E; /* Text gri foarte Ã®nchis */
      height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    /* Fundalul cu imaginea PÄƒmÃ¢nt-RÄƒsÄƒrit */
    .background-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
      filter: brightness(0.8); /* Luminozitate ajustatÄƒ pentru lizibilitate text */
    }

    /* Containerul principal al aplicaÈ›iei, care va gÄƒzdui toate paginile */
    #app-container {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden; /* Crucial pentru a ascunde pÄƒrÈ›ile din pagini care nu sunt Ã®n centru */
    }

    /* Stiluri de bazÄƒ pentru fiecare paginÄƒ */
    .app-page {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.1); /* Fundal semi-transparent pentru efect de sticlÄƒ */
      backdrop-filter: blur(10px); /* Efect de blur pentru paginile din spate */
      transition: transform 0.5s ease-out, opacity 0.5s ease; /* TranziÈ›ii fluide */
      z-index: 5; /* Z-index de bazÄƒ */
      box-sizing: border-box;
      padding: 20px;
    }

    /* PoziÈ›iile paginilor */
    .page-center {
      transform: translateX(0) translateY(0);
      opacity: 1;
      z-index: 10; /* Pagina centralÄƒ este deasupra */
    }
    .page-top {
      transform: translateY(-100%) translateX(0); /* Complet Ã®n afara ecranului sus */
      opacity: 0.7;
      pointer-events: none; /* Nu permite interacÈ›iuni cÃ¢nd e parÈ›ial vizibilÄƒ */
      z-index: 6;
    }
    .page-bottom {
      transform: translateY(100%) translateX(0); /* Complet Ã®n afara ecranului jos */
      opacity: 0.7;
      pointer-events: none;
      z-index: 6;
    }
    .page-left {
      transform: translateX(-100%) translateY(0); /* Complet Ã®n afara ecranului stÃ¢nga */
      opacity: 0.7;
      pointer-events: none;
      z-index: 6;
    }
    .page-right {
      transform: translateX(100%) translateY(0); /* Complet Ã®n afara ecranului dreapta */
      opacity: 0.7;
      pointer-events: none;
      z-index: 6;
    }

    /* Stiluri pentru etichetele paginilor */
    .page-label {
      position: absolute;
      background-color: rgba(255, 255, 255, 0.2);
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: bold;
      opacity: 0; /* Ascuns implicit */
      transition: opacity 0.3s ease;
      pointer-events: none; /* Nu blocheazÄƒ swipe-ul */
    }

    /* Vizibilitatea etichetelor Ã®n funcÈ›ie de poziÈ›ia paginii */
    .page-top .label-bottom { opacity: 1; bottom: 10px; left: 50%; transform: translateX(-50%); }
    .page-bottom .label-top { opacity: 1; top: 10px; left: 50%; transform: translateX(-50%); }
    .page-left .label-right { opacity: 1; right: 10px; top: 50%; transform: translateY(-50%); }
    .page-right .label-left { opacity: 1; left: 10px; top: 50%; transform: translateY(-50%); }

    /* Stiluri specifice pentru pagina Journal (Home) */
    #journal-page {
      background-color: rgba(255, 255, 255, 0.1); /* Fundal semi-transparent pentru efect de sticlÄƒ */
    }

    /* Stiluri pentru "soare" - butonul central de Ã®nregistrare */
    .sun {
      @apply absolute rounded-full bg-yellow-300 shadow-2xl;
      width: 160px;
      height: 160px;
      transition: all 0.8s ease-in-out, background-color 0.5s ease;
      z-index: 20; /* Soarele este deasupra conÈ›inutului paginii */
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.2rem;
    }
    /* AnimaÈ›ia de expansiune a soarelui */
    .sun.expanding {
      width: 100vw;
      height: 100vh;
      left: 0 !important;
      top: 0 !important;
      border-radius: 0;
      z-index: 50; /* Aduce soarele Ã®n prim-plan maxim */
      background-color: #C7EDE6; /* Culoarea de accent verde mentÄƒ la expansiune */
    }

    /* Stiluri pentru egalizatorul audio */
    .equalizer {
      display: flex;
      justify-content: center;
      align-items: end;
      height: 40px;
      gap: 4px;
      margin-top: 12px;
    }
    .bar {
      width: 4px;
      height: 10px;
      background: #C7EDE6; /* Culoarea de accent verde mentÄƒ pentru bare */
      animation: bounce 1s infinite ease-in-out;
    }
    .bar:nth-child(2) { animation-delay: 0.1s; }
    .bar:nth-child(3) { animation-delay: 0.2s; }
    .bar:nth-child(4) { animation-delay: 0.3s; }
    .bar:nth-child(5) { animation-delay: 0.4s; }
    /* AnimaÈ›ia de "sÄƒriturÄƒ" a barelor egalizatorului */
    @keyframes bounce {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(2); }
    }
    /* Ascunde secÈ›iunea de Ã®nregistrare iniÈ›ial */
    #rec-section {
      display: none;
    }
    /* AfiÈ™eazÄƒ secÈ›iunea de Ã®nregistrare cÃ¢nd soarele este "activ" */
    #sun.active + #rec-section {
      display: flex; /* Folosim flex pentru a centra conÈ›inutul */
    }

    /* Stiluri pentru modalul de inspiraÈ›ie */
    .modal {
      display: none; /* Ascuns implicit */
      position: fixed; /* PoziÈ›ionat fix pe ecran */
      z-index: 100; /* Deasupra tuturor elementelor */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto; /* Permite scroll dacÄƒ conÈ›inutul este prea mare */
      background-color: rgba(0,0,0,0.4); /* Fundal semi-transparent */
      backdrop-filter: blur(5px); /* Efect de blur */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background-color: #FDFBF6; /* Fundal bej cald */
      margin: auto;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: relative;
      color: #2E2E2E;
    }
    .close-button {
      color: #aaa;
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close-button:hover,
    .close-button:focus {
      color: #2E2E2E;
      text-decoration: none;
      cursor: pointer;
    }
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #C7EDE6; /* Verde mentÄƒ */
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
      display: none; /* Ascuns implicit */
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Stiluri pentru zona de transcriere live */
    .transcript-area {
      @apply w-full max-w-2xl bg-white/50 backdrop-blur-sm border border-white/30 rounded-xl shadow-lg p-6 overflow-y-auto;
      min-height: 200px;
      max-height: 60vh;
      color: #2E2E2E;
      margin-top: 20px; /* SpaÈ›iu sub mesajul de bun venit */
      display: none; /* Ascuns iniÈ›ial */
    }
    .transcript-area p {
      color: #2E2E2E;
    }
    /* AnimaÈ›ie subtilÄƒ pentru propoziÈ›iile care apar */
    .sentence-pop-in {
      animation: popIn 0.5s ease-out forwards;
      opacity: 0;
      transform: translateY(10px);
    }
    @keyframes popIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Stiluri pentru pulsarea soarelui Ã®n timpul Ã®nregistrÄƒrii */
    .sun-pulsating {
      animation: sunPulse 2s infinite ease-in-out;
    }
    @keyframes sunPulse {
      0% { transform: scale(1) translate(-50%, -50%); }
      50% { transform: scale(1.05) translate(-50%, -50%); } /* UÈ™oarÄƒ dilatare */
      100% { transform: scale(1) translate(-50%, -50%); }
    }

    .sun-speaking {
      animation: sunSpeak 0.5s infinite alternate ease-in-out;
    }
    @keyframes sunSpeak {
      0% { transform: scale(1) translate(-50%, -50%); }
      100% { transform: scale(0.98) translate(-50%, -50%); } /* UÈ™oarÄƒ contracÈ›ie */
    }

    /* ClasÄƒ pentru ascunderea elementelor */
    .hidden-element {
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
      transition: opacity 0.5s ease;
    }

    /* Stiluri pentru pagina MyGoals */
    .input-glass {
      @apply bg-white/30 border border-white/40 rounded-md px-3 py-2 text-gray-800 w-full;
    }
    .input-glass::placeholder {
      color: #718096;
    }
    .action-button {
      @apply bg-blue-300 hover:bg-blue-400 text-white font-medium py-2 px-4 rounded-full transition-colors duration-200;
    }
    .glass {
      @apply backdrop-blur-lg bg-white/50 border border-white/30 rounded-xl shadow-lg;
    }

    /* Stiluri pentru pagina Reports */
    .score-emoji {
      font-size: 2.5rem;
    }
    .positive-text {
      color: #10B981;
    }
    .negative-text {
      color: #EF4444;
    }
    .intent-text {
      color: #FACC15;
    }

    /* Stiluri pentru pagina History */
    .session-card {
      @apply bg-white/50 backdrop-blur-sm shadow p-4 rounded-xl border border-white/30;
    }
  </style>
</head>
<body>
  <!-- Fundalul principal cu imaginea PÄƒmÃ¢nt-RÄƒsÄƒrit -->
  <img src="https://placehold.co/1920x1080/000000/FFFFFF?text=Fundal+Pamant+Rasarit" alt="Fundal PÄƒmÃ¢nt RÄƒsÄƒrit" class="background-image" id="backgroundImage">
  <!-- Aici vei Ã®nlocui 'https://placehold.co/1920x1080/000000/FFFFFF?text=Fundal+Pamant+Rasarit' cu URL-ul imaginii tale reale: fundal LUM 1.jpg -->

  <!-- Containerul principal al aplicaÈ›iei -->
  <div id="app-container" class="relative w-full h-full">

    <!-- Pagina 1: Journal (Home) -->
    <div id="journal-page" class="app-page page-center">
      <div class="page-label label-bottom">Journal</div>
      <div class="page-label label-top">Journal</div>
      <div class="page-label label-left">Journal</div>
      <div class="page-label label-right">Journal</div>

      <!-- Mesajul de bun venit È™i introducere -->
      <div id="welcomeMessage" class="text-center px-4 z-10 text-white">
        <h1 class="text-3xl font-semibold">Bun venit Ã®n spaÈ›iul tÄƒu</h1>
        <p class="mt-2 text-lg max-w-md mx-auto italic opacity-90">
          LumiYE este o evadare din prezentul agitat. Un loc Ã®n care poÈ›i sÄƒ respiri, sÄƒ simÈ›i, sÄƒ fii.
        </p>
        <p class="mt-2 text-base max-w-sm mx-auto opacity-70">
          Fie cÄƒ vrei sÄƒ pÄƒstrezi o stare de bine sau sÄƒ descarci ceva ce te apasÄƒ, <strong>acum</strong> e momentul.
        </p>
      </div>

      <!-- Butonul central "soare" pentru a Ã®ncepe sesiunea -->
      <div id="sun" class="sun mt-8">
        <span id="sun-text">ğŸ™ï¸ Ãncepe Sesiunea</span>
      </div>

      <!-- Egalizatorul È™i textul de stare (vizibile doar la Ã®nregistrare activÄƒ) -->
      <div id="rec-section" class="absolute bottom-6 w-full flex-col items-center z-10 text-sm text-white">
        <div class="equalizer">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        <p class="mt-2 text-center px-4" id="status-msg">
          Se memorizeazÄƒ starea ta actualÄƒ.<br />
          <span class="opacity-70 text-xs">AceastÄƒ memorizare va fi exclusiv Ã®n telefonul tÄƒu È™i Ã®n posesia ta.</span>
        </p>
      </div>

      <!-- Zona de transcriere live (ascunsÄƒ iniÈ›ial) -->
      <div id="transcriptArea" class="transcript-area text-lg leading-relaxed">
        <p class="text-gray-500 text-center italic">VorbeÈ™te liber. LumiYE te ascultÄƒ...</p>
      </div>

      <!-- Modal pentru afiÈ™area inspiraÈ›iei -->
      <div id="inspirationModal" class="modal">
        <div class="modal-content">
          <span class="close-button" id="closeModalButton">&times;</span>
          <h2 class="text-xl font-semibold mb-4 text-center">âœ¨ InspiraÈ›ia Ta âœ¨</h2>
          <div id="loadingSpinner" class="loading-spinner"></div>
          <p id="inspirationText" class="text-gray-700 leading-relaxed text-center"></p>
        </div>
      </div>
    </div>

    <!-- Pagina 2: Reports -->
    <div id="reports-page" class="app-page page-right">
      <div class="page-label label-bottom">Reports</div>
      <div class="page-label label-top">Reports</div>
      <div class="page-label label-left">Reports</div>
      <div class="page-label label-right">Reports</div>

      <div class="card w-full max-w-2xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-800 text-center">Raportul Sesiunii Tale</h1>
        <p class="mt-2 text-sm text-gray-500 text-center" id="sessionPeriod">PerioadÄƒ: N/A</p>

        <div class="mt-6 text-center">
          <h2 class="section-title">Starea EmoÈ›ionalÄƒ GeneralÄƒ</h2>
          <p id="emotionalScore" class="text-3xl font-bold"></p>
          <p id="scoreEmoji" class="score-emoji mt-2"></p>
        </div>

        <div class="mt-4">
          <h2 class="section-title">Transcriere</h2>
          <p id="transcriptContent" class="text-gray-700 leading-relaxed whitespace-pre-wrap">
            FÄƒrÄƒ transcriere disponibilÄƒ.
          </p>
        </div>

        <div class="mt-6">
          <h2 class="section-title">Cuvinte Cheie</h2>
          <div id="highWordsList" class="mt-2">
            <h3 class="font-semibold positive-text">Cuvinte High:</h3>
            <ul class="list-disc list-inside text-gray-700" id="highWordsUl">
              <li>Niciun cuvÃ¢nt "High" detectat.</li>
            </ul>
          </div>
          <div id="lowWordsList" class="mt-4">
            <h3 class="font-semibold negative-text">Cuvinte Low:</h3>
            <ul class="list-disc list-inside text-gray-700" id="lowWordsUl">
              <li>Niciun cuvÃ¢nt "Low" detectat.</li>
            </ul>
          </div>
        </div>

        <div class="mt-4">
          <h2 class="section-title">IntenÈ›ii Detectate</h2>
          <ul class="list-disc list-inside text-gray-700" id="intentiiList">
            <li>Nicio intenÈ›ie detectatÄƒ.</li>
          </ul>
        </div>

        <div class="mt-4">
          <h2 class="section-title">Analiza RespiraÈ›iei</h2>
          <p id="breathingAnalysis" class="text-gray-700">FÄƒrÄƒ analizÄƒ disponibilÄƒ.</p>
        </div>
      </div>
    </div>

    <!-- Pagina 3: My Goals -->
    <div id="mygoals-page" class="app-page page-bottom">
      <div class="page-label label-bottom">My Goals</div>
      <div class="page-label label-top">My Goals</div>
      <div class="page-label label-left">My Goals</div>
      <div class="page-label label-right">My Goals</div>

      <div class="max-w-xl mx-auto mt-10 w-full">
        <h1 class="text-2xl font-semibold mb-6 text-center">ğŸ¯ Obiectivele tale</h1>

        <div id="goals-list" class="space-y-4 mb-6">
          <!-- Obiective adÄƒugate vor apÄƒrea aici -->
        </div>

        <form id="goal-form" class="glass p-4">
          <label class="block mb-2 text-gray-700">AdaugÄƒ un obiectiv nou:</label>
          <input id="goal-input" type="text" class="input-glass mb-3" placeholder="ex: SÄƒ fiu mai rÄƒbdÄƒtor..." required />
          <button type="submit" class="action-button w-full">AdaugÄƒ Obiectiv</button>
        </form>

        <!-- Noul buton pentru rafinarea obiectivului cu Gemini API -->
        <button id="refineGoalButton" class="action-button w-full mt-4">âœ¨ RefineazÄƒ Obiectivul</button>
      </div>

      <!-- Modal pentru afiÈ™area rafinÄƒrii obiectivului -->
      <div id="refineGoalModal" class="modal">
        <div class="modal-content">
          <span class="close-button" id="closeRefineModalButton">&times;</span>
          <h2 class="text-xl font-semibold mb-4 text-center">âœ¨ Sugestii pentru Obiectivul TÄƒu âœ¨</h2>
          <div id="refineLoadingSpinner" class="loading-spinner"></div>
          <p id="refineGoalText" class="text-gray-700 leading-relaxed text-center"></p>
        </div>
      </div>
    </div>

    <!-- Pagina 4: History -->
    <div id="history-page" class="app-page page-left">
      <div class="page-label label-bottom">History</div>
      <div class="page-label label-top">History</div>
      <div class="page-label label-left">History</div>
      <div class="page-label label-right">History</div>

      <h1 class="text-2xl font-bold text-gray-800 mb-6 text-center">ğŸ“œ Istoricul Sesiunilor</h1>

      <div id="historyList" class="w-full max-w-md space-y-4">
        <!-- Lista va fi generatÄƒ din localStorage -->
      </div>
    </div>

    <!-- Pagina 5: Account (Placeholder) -->
    <div id="account-page" class="app-page page-top">
      <div class="page-label label-bottom">Account</div>
      <div class="page-label label-top">Account</div>
      <div class="page-label label-left">Account</div>
      <div class="page-label label-right">Account</div>

      <h1 class="text-2xl font-bold text-gray-800 mb-6 text-center">âš™ï¸ Contul Meu</h1>
      <p class="text-gray-700 text-center">Detalii despre cont È™i setÄƒri vor fi disponibile aici.</p>
    </div>

  </div> <!-- End of #app-container -->

  <script>
    // ReferinÈ›e la elementele DOM
    const appContainer = document.getElementById('app-container');
    const journalPage = document.getElementById('journal-page');
    const reportsPage = document.getElementById('reports-page');
    const mygoalsPage = document.getElementById('mygoals-page');
    const historyPage = document.getElementById('history-page');
    const accountPage = document.getElementById('account-page');

    const pages = {
      'journal': journalPage,
      'reports': reportsPage,
      'mygoals': mygoalsPage,
      'history': historyPage,
      'account': accountPage
    };

    let currentPageId = 'journal'; // Pagina iniÈ›ialÄƒ este Journal (Home)

    // ReferinÈ›e pentru elementele din Journal Page
    const sun = document.getElementById('sun');
    const sunText = document.getElementById('sun-text');
    const recSection = document.getElementById('rec-section');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const transcriptArea = document.getElementById('transcriptArea');
    const inspirationModal = document.getElementById('inspirationModal');
    const closeModalButton = document.getElementById('closeModalButton');
    const inspirationText = document.getElementById('inspirationText');
    const loadingSpinner = document.getElementById('loadingSpinner');

    let isRecording = false;
    let recognition;
    let startTime;
    const maxRecordingTime = 120;
    let recordingInterval;
    let currentTranscript = '';
    let silenceTimeout;

    // ReferinÈ›e pentru elementele din MyGoals Page
    const goalForm = document.getElementById('goal-form');
    const goalInput = document.getElementById('goal-input');
    const goalsList = document.getElementById('goals-list');
    const refineGoalButton = document.getElementById('refineGoalButton');
    const refineGoalModal = document.getElementById('refineGoalModal');
    const closeRefineModalButton = document.getElementById('closeRefineModalButton');
    const refineGoalText = document.getElementById('refineGoalText');
    const refineLoadingSpinner = document.getElementById('refineLoadingSpinner');
    let savedGoals = JSON.parse(localStorage.getItem('myGoals') || '[]');

    // ReferinÈ›e pentru elementele din Reports Page
    const sessionPeriod = document.getElementById('sessionPeriod');
    const emotionalScore = document.getElementById('emotionalScore');
    const scoreEmoji = document.getElementById('scoreEmoji');
    const transcriptContent = document.getElementById('transcriptContent');
    const highWordsUl = document.getElementById('highWordsUl');
    const lowWordsUl = document.getElementById('lowWordsUl');
    const intentiiList = document.getElementById('intentiiList');
    const breathingAnalysis = document.getElementById('breathingAnalysis');

    // ReferinÈ›e pentru elementele din History Page
    const historyList = document.getElementById('historyList');

    // Variabile pentru detectarea swipe-ului
    let touchstartX = 0;
    let touchstartY = 0;
    let touchendX = 0;
    let touchendY = 0;

    // --- FuncÈ›ii de Utilitate ---

    // FuncÈ›ie pentru a simula analiza NLP
    function analyzeText(text) {
      const positiveWords = ['bucurie', 'speranÈ›Äƒ', 'fericit', 'mulÈ›umit', 'recunoÈ™tinÈ›Äƒ', 'curaj', 'potenÈ›ial', 'vreau', 'succes'];
      const negativeWords = ['nu pot', 'blocat', 'singur', 'eÈ™ec', 'trist', 'copleÈ™it', 'stres', 'Ã®ndoieli', 'obosit'];

      let positives = 0;
      let negatives = 0;
      const lowerCaseText = text.toLowerCase();

      positiveWords.forEach(word => { if (lowerCaseText.includes(word)) positives++; });
      negativeWords.forEach(word => { if (lowerCaseText.includes(word)) negatives++; });

      let intentii = [];
      if (lowerCaseText.includes('nu mai vreau sÄƒ fiu')) intentii.push(`"nu mai vreau sÄƒ fiu..." â†’ evitare`);
      if (lowerCaseText.includes('vreau sÄƒ devin')) intentii.push(`"vreau sÄƒ devin..." â†’ progres`);
      return { positives, negatives, intentii };
    }

    // FuncÈ›ie pentru a simula analiza respiraÈ›iei (WPM È™i pauze)
    function analyzeBreathing(text, durationInSeconds) {
      const words = text.split(/\s+/).filter(word => word.length > 0);
      const wordCount = words.length;
      const wpm = durationInSeconds > 0 ? (wordCount / durationInSeconds) * 60 : 0;
      const sentences = text.split(/[.!?]/).filter(s => s.trim().length > 0);
      const averageSentenceLength = sentences.length > 0 ? wordCount / sentences.length : 0;

      let breathingFeedback = '';
      if (wpm > 180) breathingFeedback = 'Ai vorbit Ã®ntr-un ritm rapid azi.';
      else if (wpm < 80 && wpm > 0) breathingFeedback = 'Ai un ritm de vorbire calm.';

      if (sentences.length > 1 && averageSentenceLength < 5) breathingFeedback += ' Pauzele scurte pot semnala agitaÈ›ie.';
      else if (sentences.length > 1 && averageSentenceLength > 15) breathingFeedback += ' Fluxul coerent al vorbirii.';
      return { wpm: wpm.toFixed(0), breathingFeedback };
    }

    // FuncÈ›ie pentru a calcula scorul emoÈ›ional È™i emoji-ul
    function getEmotionalScore(positives, negatives) {
      if (positives === 0 && negatives === 0) return { score: 'Neutru', emoji: 'ğŸ˜' };
      const total = positives + negatives;
      const percentagePositive = (positives / total) * 100;

      if (percentagePositive >= 75) return { score: 'Foarte Pozitiv', emoji: 'ğŸ˜Š' };
      else if (percentagePositive >= 50) return { score: 'Pozitiv', emoji: 'ğŸ™‚' };
      else if (percentagePositive >= 25) return { score: 'Echilibrat', emoji: 'ğŸ˜Œ' };
      else return { score: 'Mai degrabÄƒ Negativ', emoji: 'ğŸ˜”' };
    }

    // --- LogicÄƒ de Navigare (Carusel) ---

    // FuncÈ›ie pentru a actualiza poziÈ›iile paginilor
    function updatePagePositions() {
      // Ascunde toate etichetele iniÈ›ial
      document.querySelectorAll('.page-label').forEach(label => label.style.opacity = '0');

      for (const id in pages) {
        pages[id].classList.remove('page-center', 'page-top', 'page-bottom', 'page-left', 'page-right');
      }

      // SeteazÄƒ poziÈ›iile relative la pagina curentÄƒ
      pages[currentPageId].classList.add('page-center');

      // PoziÈ›ioneazÄƒ celelalte pagini Ã®n jurul paginii curente
      // Acestea trebuie sÄƒ fie paginile reale, nu doar link-uri
      // Pentru MVP, vom simula o dispunere fixÄƒ Ã®n jurul Journal-ului
      // Journal (center)
      // Reports (right)
      // MyGoals (bottom)
      // History (left)
      // Account (top)

      if (currentPageId === 'journal') {
        pages['reports'].classList.add('page-right');
        pages['mygoals'].classList.add('page-bottom');
        pages['history'].classList.add('page-left');
        pages['account'].classList.add('page-top');
      } else if (currentPageId === 'reports') {
        pages['journal'].classList.add('page-left'); // Journal e la stanga lui Reports
        pages['mygoals'].classList.add('page-bottom'); // MyGoals e tot jos
        pages['history'].classList.add('page-left'); // History e tot stanga
        pages['account'].classList.add('page-top'); // Account e tot sus
        // Aici logica devine mai complexÄƒ pentru a simula un carusel real cu 5 pagini
        // Pentru a simplifica, vom presupune cÄƒ Journal este Ã®ntotdeauna centrul de referinÈ›Äƒ
        // È™i celelalte pagini sunt aduse Ã®n centru pe rÃ¢nd.
        // O implementare realÄƒ ar necesita o matrice de poziÈ›ii sau un sistem de indexare.
      }
      // ... È™i aÈ™a mai departe pentru fiecare paginÄƒ
      // Pentru MVP, ne concentrÄƒm pe tranziÈ›ia *cÄƒtre* pagina centralÄƒ È™i *de la* ea.
      // Vom simplifica logica de poziÈ›ionare a celorlalte pagini pentru a corespunde imaginii.
      // CÃ¢nd o paginÄƒ este Ã®n centru, celelalte 4 sunt Ã®n poziÈ›iile lor fixe (top, bottom, left, right).
      // CÃ¢nd o paginÄƒ este activÄƒ, celelalte sunt inactive (pointer-events: none).
      // Etichetele sunt vizibile doar pentru paginile inactive.
      // Aceasta este o simplificare majorÄƒ pentru MVP, dar respectÄƒ cerinÈ›a vizualÄƒ.
    }

    // FuncÈ›ie pentru a naviga la o paginÄƒ specificÄƒ
    function navigateTo(targetPageId) {
      if (currentPageId === targetPageId) return; // Deja pe pagina respectivÄƒ

      // Ascunde etichetele paginii curente
      pages[currentPageId].querySelectorAll('.page-label').forEach(label => label.style.opacity = '0');

      // AdaugÄƒ clasa de ieÈ™ire pentru pagina curentÄƒ
      pages[currentPageId].classList.remove('page-center');
      // DeterminÄƒ direcÈ›ia de ieÈ™ire pentru pagina curentÄƒ
      // Aceasta este o simplificare, Ã®n funcÈ›ie de unde se aflÄƒ pagina È›intÄƒ
      let exitClass = '';
      if (targetPageId === 'account') exitClass = 'page-bottom'; // DacÄƒ mergem sus, pagina curentÄƒ iese Ã®n jos
      else if (targetPageId === 'mygoals') exitClass = 'page-top'; // DacÄƒ mergem jos, pagina curentÄƒ iese Ã®n sus
      else if (targetPageId === 'history') exitClass = 'page-right'; // DacÄƒ mergem stÃ¢nga, pagina curentÄƒ iese Ã®n dreapta
      else if (targetPageId === 'reports') exitClass = 'page-left'; // DacÄƒ mergem dreapta, pagina curentÄƒ iese Ã®n stÃ¢nga
      else if (targetPageId === 'journal') { // DacÄƒ revenim la journal, depinde de unde am venit
        // LogicÄƒ mai complexÄƒ aici, pentru MVP vom presupune cÄƒ revine la centru
        // È™i celelalte se repoziÈ›ioneazÄƒ
      }
      pages[currentPageId].classList.add(exitClass);


      // SeteazÄƒ pagina È›intÄƒ ca paginÄƒ curentÄƒ
      currentPageId = targetPageId;

      // AdaugÄƒ clasa de intrare pentru pagina È›intÄƒ
      pages[currentPageId].classList.remove('page-top', 'page-bottom', 'page-left', 'page-right');
      pages[currentPageId].classList.add('page-center');

      // AfiÈ™eazÄƒ etichetele pentru paginile adiacente
      updatePagePositions(); // Re-apeleazÄƒ pentru a asigura vizibilitatea etichetelor corecte
    }


    // --- LogicÄƒ de Ãnregistrare (Journal Page) ---

    // FuncÈ›ia pentru a Ã®ncepe Ã®nregistrarea
    function startRecording() {
      if (!('webkitSpeechRecognition' in window)) {
        statusMsg.textContent = 'API-ul de recunoaÈ™tere vocalÄƒ nu este suportat de browserul tÄƒu.';
        return;
      }

      recognition = new webkitSpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = true;
      recognition.lang = 'ro-RO';

      let finalTranscript = '';

      recognition.onstart = () => {
        isRecording = true;
        startTime = Date.now();
        sunText.textContent = 'ğŸ™ï¸';
        sun.classList.add('active', 'sun-pulsating');
        recSection.style.display = 'flex';
        welcomeMessage.classList.add('hidden-element');
        transcriptArea.style.display = 'block';
        transcriptArea.innerHTML = '<p class="text-gray-500 text-center italic">VorbeÈ™te liber. LumiYE te ascultÄƒ...</p>';
        currentTranscript = '';

        // Ascunde toate etichetele paginilor
        document.querySelectorAll('.page-label').forEach(label => label.style.opacity = '0');
        // Ascunde toate paginile secundare
        for (const id in pages) {
            if (id !== currentPageId) {
                pages[id].classList.add('hidden-element');
            }
        }

        // Resetarea pulsÄƒrii la Ã®nceputul Ã®nregistrÄƒrii
        sun.classList.remove('sun-speaking');
        sun.classList.add('sun-pulsating');

        resetSilenceTimeout();
      };

      recognition.onresult = (event) => {
        let hasSpeech = false;
        for (let i = event.resultIndex; i < event.results.length; ++i) {
          if (event.results[i].isFinal) {
            finalTranscript += event.results[i][0].transcript + '. ';
            const p = document.createElement('p');
            p.textContent = event.results[i][0].transcript;
            p.classList.add('sentence-pop-in');
            transcriptArea.appendChild(p);
            transcriptArea.scrollTop = transcriptArea.scrollHeight;
            currentTranscript = finalTranscript;
            hasSpeech = true;
          }
        }

        if (hasSpeech) {
          sun.classList.remove('sun-pulsating');
          sun.classList.add('sun-speaking');
          resetSilenceTimeout();
        }
      };

      recognition.onend = () => {
        if (isRecording) {
          isRecording = false;
          clearTimeout(silenceTimeout);
          sun.classList.remove('sun-pulsating', 'sun-speaking', 'active');
          recSection.style.display = 'none';
          transcriptArea.style.display = 'none';
          processSession(currentTranscript);
        }
      };

      recognition.onerror = (event) => {
        console.error('Eroare recunoaÈ™tere vocalÄƒ:', event.error);
        statusMsg.textContent = `Eroare: ${event.error}. Te rugÄƒm sÄƒ Ã®ncerci din nou.`;
        isRecording = false;
        clearTimeout(silenceTimeout);
        sun.classList.remove('sun-pulsating', 'sun-speaking', 'active');
        recSection.style.display = 'none';
        transcriptArea.style.display = 'none';
        welcomeMessage.classList.remove('hidden-element');
        sunText.textContent = 'ğŸ™ï¸ Ãncepe Sesiunea';
        // AfiÈ™eazÄƒ din nou paginile secundare È™i etichetele
        for (const id in pages) {
            if (id !== currentPageId) {
                pages[id].classList.remove('hidden-element');
            }
        }
        updatePagePositions();
      };

      recognition.start();

      recordingInterval = setTimeout(() => {
        if (isRecording) stopRecording();
      }, maxRecordingTime * 1000);
    }

    // FuncÈ›ia pentru a opri Ã®nregistrarea
    function stopRecording() {
      if (isRecording) {
        recognition.stop();
        isRecording = false;
        clearTimeout(silenceTimeout);
        clearTimeout(recordingInterval);
        sun.classList.remove('sun-pulsating', 'sun-speaking', 'active');
        recSection.style.display = 'none';
        transcriptArea.style.display = 'none';
        processSession(currentTranscript);
      }
    }

    // FuncÈ›ie pentru a reseta timeout-ul de liniÈ™te
    function resetSilenceTimeout() {
      clearTimeout(silenceTimeout);
      sun.classList.remove('sun-speaking');
      sun.classList.add('sun-pulsating');
      silenceTimeout = setTimeout(() => {
        if (isRecording) stopRecording();
        console.log("Ãnregistrare opritÄƒ din cauza liniÈ™tii prelungite.");
      }, 10000);
    }

    // FuncÈ›ia principalÄƒ de procesare a sesiunii
    function processSession(transcript) {
      const duration = (Date.now() - startTime) / 1000;
      const { positives, negatives, intentii } = analyzeText(transcript);
      const { wpm, breathingFeedback } = analyzeBreathing(transcript, duration);

      const sessionData = {
        time: new Date().toLocaleString('ro-RO', { dateStyle: 'medium', timeStyle: 'short' }),
        transcript: transcript,
        duration: duration.toFixed(0),
        analysis: { positives, negatives, highWords: [], lowWords: [], intentii, wpm, breathingFeedback }
      };

      localStorage.setItem('current_session_data', JSON.stringify(sessionData));

      // DupÄƒ Ã®nregistrare, navigÄƒm la pagina de rapoarte
      navigateTo('reports');
      // AfiÈ™eazÄƒ din nou paginile secundare È™i etichetele
      for (const id in pages) {
            if (id !== currentPageId) {
                pages[id].classList.remove('hidden-element');
            }
        }
      welcomeMessage.classList.remove('hidden-element');
      sunText.textContent = 'ğŸ™ï¸ Ãncepe Sesiunea';
      updatePagePositions(); // Re-afiÈ™eazÄƒ etichetele
    }

    // --- LogicÄƒ Gemini API (InspiraÈ›ie) ---
    async function generateInspiration() {
      inspirationText.textContent = '';
      loadingSpinner.style.display = 'block';
      inspirationModal.style.display = 'flex';

      try {
        let chatHistory = [];
        const prompt = "GenereazÄƒ o frazÄƒ scurtÄƒ, pozitivÄƒ È™i inspiraÈ›ionalÄƒ despre auto-reflecÈ›ie, creÈ™tere personalÄƒ sau liniÈ™te interioarÄƒ. Fraza sÄƒ fie concisÄƒ È™i sÄƒ inspire calm.";
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const result = await response.json();

        if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
          inspirationText.textContent = result.candidates[0].content.parts[0].text;
        } else {
          inspirationText.textContent = "Nu am putut genera inspiraÈ›ie. Te rugÄƒm sÄƒ Ã®ncerci din nou.";
          console.error("Structura rÄƒspunsului API este neaÈ™teptatÄƒ:", result);
        }
      } catch (error) {
        inspirationText.textContent = "A apÄƒrut o eroare la generarea inspiraÈ›iei. VerificÄƒ conexiunea la internet.";
        console.error("Eroare la apelul Gemini API:", error);
      } finally {
        loadingSpinner.style.display = 'none';
      }
    }

    // --- LogicÄƒ MyGoals Page ---
    function addGoalToDOM(goal) {
      const div = document.createElement('div');
      div.className = 'glass p-3 flex items-center justify-between';
      div.innerHTML = `<span class="block text-gray-800">ğŸ“ ${goal}</span><button class="delete-goal-button text-red-500 hover:text-red-700 ml-4 text-xl">&times;</button>`;
      goalsList.appendChild(div);
      div.querySelector('.delete-goal-button').addEventListener('click', () => removeGoalFromDOM(goal, div));
    }

    function removeGoalFromDOM(goalToRemove, element) {
      const index = savedGoals.indexOf(goalToRemove);
      if (index > -1) {
        savedGoals.splice(index, 1);
        localStorage.setItem('myGoals', JSON.stringify(savedGoals));
        element.remove();
      }
    }

    async function refineGoal() {
      let goalToRefine = '';
      if (savedGoals.length > 0) {
        goalToRefine = savedGoals[savedGoals.length - 1];
      } else {
        refineGoalText.textContent = "Nu ai adÄƒugat Ã®ncÄƒ niciun obiectiv. AdaugÄƒ unul pentru a primi sugestii.";
        refineLoadingSpinner.style.display = 'none';
        refineGoalModal.style.display = 'flex';
        return;
      }

      refineGoalText.textContent = '';
      refineLoadingSpinner.style.display = 'block';
      refineGoalModal.style.display = 'flex';

      try {
        let chatHistory = [];
        const prompt = `Pentru obiectivul "${goalToRefine}", genereazÄƒ o scurtÄƒ sugestie de rafinare care sÄƒ-l facÄƒ mai specific È™i acÈ›ionabil, sau o afirmaÈ›ie pozitivÄƒ legatÄƒ de atingerea acestui obiectiv. Fii concis È™i Ã®ncurajator.`;
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const result = await response.json();

        if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
          refineGoalText.textContent = result.candidates[0].content.parts[0].text;
        } else {
          refineGoalText.textContent = "Nu am putut genera sugestii. Te rugÄƒm sÄƒ Ã®ncerci din nou.";
          console.error("Structura rÄƒspunsului API este neaÈ™teptatÄƒ:", result);
        }
      } catch (error) {
        refineGoalText.textContent = "A apÄƒrut o eroare la generarea sugestiilor. VerificÄƒ conexiunea la internet.";
        console.error("Eroare la apelul Gemini API:", error);
      } finally {
        refineLoadingSpinner.style.display = 'none';
      }
    }

    // --- LogicÄƒ Reports Page ---
    function populateReport(session) {
      sessionPeriod.textContent = `PerioadÄƒ: ${session.time || 'Timp necunoscut'} (DuratÄƒ: ${session.duration || 'N/A'} secunde)`;
      transcriptContent.textContent = session.transcript || 'FÄƒrÄƒ transcriere disponibilÄƒ.';

      highWordsUl.innerHTML = '';
      lowWordsUl.innerHTML = '';

      if (session.analysis.positives > 0) {
        const li = document.createElement('li');
        li.textContent = `(Au fost detectate ${session.analysis.positives} cuvinte pozitive)`;
        highWordsUl.appendChild(li);
      } else {
        highWordsUl.innerHTML = '<li>Niciun cuvÃ¢nt "High" detectat.</li>';
      }

      if (session.analysis.negatives > 0) {
        const li = document.createElement('li');
        li.textContent = `(Au fost detectate ${session.analysis.negatives} cuvinte negative)`;
        lowWordsUl.appendChild(li);
      } else {
        lowWordsUl.innerHTML = '<li>Niciun cuvÃ¢nt "Low" detectat.</li>';
      }

      intentiiList.innerHTML = '';
      if (session.analysis.intentii && session.analysis.intentii.length > 0) {
        session.analysis.intentii.forEach(intentie => {
          const li = document.createElement('li');
          li.textContent = intentie;
          li.classList.add('intent-text');
          intentiiList.appendChild(li);
        });
      } else {
        intentiiList.innerHTML = '<li>Nicio intenÈ›ie detectatÄƒ.</li>';
      }

      breathingAnalysis.textContent = session.analysis.breathingFeedback || 'FÄƒrÄƒ analizÄƒ disponibilÄƒ.';

      const { score, emoji } = getEmotionalScore(session.analysis.positives, session.analysis.negatives);
      emotionalScore.textContent = score;
      scoreEmoji.textContent = emoji;
    }

    // --- LogicÄƒ History Page ---
    function loadHistory() {
      const rawData = localStorage.getItem('lumiye_sessions');
      if (!rawData) {
        historyList.innerHTML = '<p class="text-gray-500 text-center">Nicio sesiune salvatÄƒ Ã®ncÄƒ.</p>';
        return;
      }

      const sessions = JSON.parse(rawData);
      if (!sessions.length) {
        historyList.innerHTML = '<p class="text-gray-500 text-center">Nicio sesiune salvatÄƒ Ã®ncÄƒ.</p>';
        return;
      }

      historyList.innerHTML = ''; // CurÄƒÈ›Äƒ lista Ã®nainte de a o repopula
      sessions.reverse().forEach((session, index) => {
        const item = document.createElement('div');
        item.className = 'session-card';
        const isFirstSession = (sessions.length - 1 - index) === 0;

        item.innerHTML = `
          <h2 class="text-lg font-semibold text-gray-800">Sesiune #${sessions.length - index} ${isFirstSession ? '<span class="text-blue-500 text-sm">(Origine)</span>' : ''}</h2>
          <p class="text-sm text-gray-600">ğŸ•’ ${session.time || 'Timp necunoscut'} (DuratÄƒ: ${session.duration || 'N/A'} secunde)</p>
          <p class="mt-2 text-gray-700 line-clamp-3">${session.transcript || 'FÄƒrÄƒ transcriere disponibilÄƒ.'}</p>
          <div class="mt-2 text-sm">
            <span class="text-green-600">Pozitive: ${session.analysis.positives || 0}</span> |
            <span class="text-red-600">Negative: ${session.analysis.negatives || 0}</span> |
            <span class="text-blue-500">WPM: ${session.analysis.wpm || 'N/A'}</span>
          </div>
        `;
        historyList.appendChild(item);
      });
    }


    // --- IniÈ›ializare È™i Evenimente ---

    // IniÈ›ializare pagini
    document.addEventListener('DOMContentLoaded', () => {
      updatePagePositions(); // SeteazÄƒ poziÈ›iile iniÈ›iale ale paginilor
      loadHistory(); // ÃncarcÄƒ istoricul la pornire
      savedGoals.forEach(addGoalToDOM); // ÃncarcÄƒ obiectivele la pornire
    });

    // Evenimente pentru butonul Soare (Ã®nregistrare)
    sun.addEventListener('mousedown', () => {
      if (!isRecording) {
        holdTimeout = setTimeout(() => {
          sun.classList.add('expanding');
          sunText.textContent = 'InspirÄƒ profund';
          setTimeout(() => {
            sun.classList.remove('expanding');
            startRecording();
          }, 2000);
        }, 1200);
      } else {
        stopRecording();
      }
    });
    sun.addEventListener('mouseup', () => { if (!isRecording) clearTimeout(holdTimeout); });
    sun.addEventListener('mouseleave', () => { if (!isRecording) clearTimeout(holdTimeout); });

    // Evenimente pentru modalul de inspiraÈ›ie
    closeModalButton.addEventListener('click', () => { inspirationModal.style.display = 'none'; });
    window.addEventListener('click', (event) => { if (event.target == inspirationModal) inspirationModal.style.display = 'none'; });

    // Evenimente pentru modalul de rafinare a obiectivului
    closeRefineModalButton.addEventListener('click', () => { refineGoalModal.style.display = 'none'; });
    window.addEventListener('click', (event) => { if (event.target == refineGoalModal) refineGoalModal.style.display = 'none'; });

    // Evenimente pentru butoanele de acÈ›iune specifice paginilor
    goalForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const goal = goalInput.value.trim();
      if (goal) {
        savedGoals.push(goal);
        localStorage.setItem('myGoals', JSON.stringify(savedGoals));
        addGoalToDOM(goal);
        goalInput.value = '';
      }
    });
    refineGoalButton.addEventListener('click', refineGoal);

    // --- LogicÄƒ de detectare swipe pentru navigare ---
    appContainer.addEventListener('touchstart', e => {
      touchstartX = e.changedTouches[0].screenX;
      touchstartY = e.changedTouches[0].screenY;
    });

    appContainer.addEventListener('touchend', e => {
      touchendX = e.changedTouches[0].screenX;
      touchendY = e.changedTouches[0].screenY;
      handleGesture();
    });

    function handleGesture() {
      const swipeThreshold = 75; // NumÄƒrul minim de pixeli pentru a detecta un swipe
      const deltaX = touchendX - touchstartX;
      const deltaY = touchendY - touchstartY;

      if (isRecording) return; // DezactiveazÄƒ swipe-ul Ã®n timpul Ã®nregistrÄƒrii

      // PrioritizeazÄƒ swipe-ul dominant (orizontal sau vertical)
      if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > swipeThreshold) {
        if (deltaY < 0) { // Swipe Up
          if (currentPageId === 'journal') navigateTo('account'); // Journal -> Account
          else if (currentPageId === 'mygoals') navigateTo('journal'); // MyGoals -> Journal
          // AdaugÄƒ mai multe cazuri pe mÄƒsurÄƒ ce stabileÈ™ti ordinea
        } else { // Swipe Down
          if (currentPageId === 'journal') navigateTo('mygoals'); // Journal -> MyGoals
          else if (currentPageId === 'account') navigateTo('journal'); // Account -> Journal
          // AdaugÄƒ mai multe cazuri
        }
      } else if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > swipeThreshold) {
        if (deltaX < 0) { // Swipe Left
          if (currentPageId === 'journal') navigateTo('reports'); // Journal -> Reports
          else if (currentPageId === 'history') navigateTo('journal'); // History -> Journal
          // AdaugÄƒ mai multe cazuri
        } else { // Swipe Right
          if (currentPageId === 'journal') navigateTo('history'); // Journal -> History
          else if (currentPageId === 'reports') navigateTo('journal'); // Reports -> Journal
          // AdaugÄƒ mai multe cazuri
        }
      }
      // ReÃ®ncarcÄƒ conÈ›inutul paginilor la navigare, dacÄƒ este necesar
      if (currentPageId === 'reports') populateReport(JSON.parse(localStorage.getItem('current_session_data')));
      if (currentPageId === 'history') loadHistory();
      if (currentPageId === 'mygoals') {
          goalsList.innerHTML = ''; // CurÄƒÈ›Äƒ lista Ã®nainte de a o repopula
          savedGoals.forEach(addGoalToDOM);
      }
    }

    // FuncÈ›ia pentru a naviga la o paginÄƒ specificÄƒ
    function navigateTo(targetPageId) {
        if (currentPageId === targetPageId) return;

        // Ascunde etichetele paginii curente
        pages[currentPageId].querySelectorAll('.page-label').forEach(label => label.style.opacity = '0');

        // Muta pagina curentÄƒ Ã®n afara vizualizÄƒrii
        pages[currentPageId].classList.remove('page-center');
        // AdaugÄƒ o clasÄƒ de "ieÈ™ire" pentru a simula miÈ™carea corectÄƒ
        let exitClass = '';
        if (targetPageId === 'account') exitClass = 'page-bottom'; // DacÄƒ mergem la Account (sus), Journal iese Ã®n jos
        else if (targetPageId === 'mygoals') exitClass = 'page-top'; // DacÄƒ mergem la MyGoals (jos), Journal iese Ã®n sus
        else if (targetPageId === 'reports') exitClass = 'page-left'; // DacÄƒ mergem la Reports (dreapta), Journal iese Ã®n stÃ¢nga
        else if (targetPageId === 'history') exitClass = 'page-right'; // DacÄƒ mergem la History (stÃ¢nga), Journal iese Ã®n dreapta
        pages[currentPageId].classList.add(exitClass);


        // SeteazÄƒ pagina È›intÄƒ ca paginÄƒ curentÄƒ
        currentPageId = targetPageId;

        // Muta pagina È›intÄƒ Ã®n centru
        pages[currentPageId].classList.remove('page-top', 'page-bottom', 'page-left', 'page-right');
        pages[currentPageId].classList.add('page-center');

        // ReafiÈ™eazÄƒ etichetele pentru paginile adiacente
        // AceastÄƒ logicÄƒ este simplificatÄƒ pentru MVP, presupunÃ¢nd cÄƒ Journal este "centrul"
        // È™i celelalte pagini sunt Ã®ntotdeauna Ã®n poziÈ›iile lor relative faÈ›Äƒ de Journal.
        // Ãn realitate, ar trebui sÄƒ recalculezi poziÈ›iile tuturor paginilor.
        // Pentru a menÈ›ine etichetele vizibile, le vom face vizibile din nou dupÄƒ tranziÈ›ie
        setTimeout(() => {
            pages[currentPageId].querySelectorAll('.page-label').forEach(label => label.style.opacity = '0'); // Ascunde etichetele paginii curente
            // AfiÈ™eazÄƒ etichetele pentru paginile adiacente
            for (const id in pages) {
                if (id !== currentPageId) {
                    pages[id].querySelectorAll('.page-label').forEach(label => label.style.opacity = '1');
                }
            }
        }, 500); // AÈ™teaptÄƒ ca tranziÈ›ia sÄƒ se termine
    }

    // AdaugÄƒ evenimente de click pentru etichetele paginilor (ca fallback/alternativÄƒ la swipe)
    document.querySelectorAll('.page-label').forEach(label => {
        label.addEventListener('click', (e) => {
            const targetPageId = e.target.textContent.toLowerCase().replace(/\s/g, ''); // Extrage ID-ul paginii din textul etichetei
            navigateTo(targetPageId);
        });
    });

  </script>
</body>
</html>
