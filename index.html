<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LumiYE â€“ Bun venit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Stiluri generale pentru corp È™i HTML, fÄƒrÄƒ overflow pentru o experienÈ›Äƒ imersivÄƒ */
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Inter', sans-serif; /* Folosim fontul Inter, conform discuÈ›iei */
      background-color: #FDFBF6; /* Fundal bej cald */
      color: #2E2E2E; /* Text gri foarte Ã®nchis */
    }
    /* Stiluri pentru butoanele de navigare cu efect de sticlÄƒ */
    .glass-button {
      @apply backdrop-blur-xl bg-white/10 border border-white/30 rounded-full text-sm shadow-lg flex items-center justify-center;
      transition: transform 0.3s ease, background-color 0.3s;
      color: #2E2E2E; /* Culoarea textului pentru butoanele de sticlÄƒ */
    }
    .glass-button:hover {
      background-color: rgba(255, 255, 255, 0.15);
    }
    /* Stiluri pentru "soare" - butonul central de Ã®nregistrare */
    .sun {
      @apply absolute rounded-full bg-yellow-300 shadow-2xl;
      width: 160px;
      height: 160px;
      transition: all 0.8s ease-in-out;
      z-index: 10; /* AsigurÄƒ cÄƒ este deasupra altor elemente */
    }
    /* AnimaÈ›ia de expansiune a soarelui */
    .sun.expanding {
      width: 100vw;
      height: 100vh;
      left: 0 !important;
      top: 0 !important;
      border-radius: 0;
      z-index: 50; /* Aduce soarele Ã®n prim-plan maxim */
      background-color: #C7EDE6; /* Culoarea de accent verde mentÄƒ la expansiune */
    }
    /* Stiluri pentru egalizatorul audio */
    .equalizer {
      display: flex;
      justify-content: center;
      align-items: end;
      height: 40px;
      gap: 4px;
      margin-top: 12px;
    }
    .bar {
      width: 4px;
      height: 10px;
      background: #C7EDE6; /* Culoarea de accent verde mentÄƒ pentru bare */
      animation: bounce 1s infinite ease-in-out;
    }
    .bar:nth-child(2) { animation-delay: 0.1s; }
    .bar:nth-child(3) { animation-delay: 0.2s; }
    .bar:nth-child(4) { animation-delay: 0.3s; }
    .bar:nth-child(5) { animation-delay: 0.4s; }
    /* AnimaÈ›ia de "sÄƒriturÄƒ" a barelor egalizatorului */
    @keyframes bounce {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(2); }
    }
    /* Ascunde secÈ›iunea de Ã®nregistrare iniÈ›ial */
    #rec-section {
      display: none;
    }
    /* AfiÈ™eazÄƒ secÈ›iunea de Ã®nregistrare cÃ¢nd soarele este "activ" */
    #sun.active + #rec-section {
      display: flex; /* Folosim flex pentru a centra conÈ›inutul */
    }

    /* Stiluri pentru modalul de inspiraÈ›ie */
    .modal {
      display: none; /* Ascuns implicit */
      position: fixed; /* PoziÈ›ionat fix pe ecran */
      z-index: 100; /* Deasupra tuturor elementelor */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto; /* Permite scroll dacÄƒ conÈ›inutul este prea mare */
      background-color: rgba(0,0,0,0.4); /* Fundal semi-transparent */
      backdrop-filter: blur(5px); /* Efect de blur */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background-color: #FDFBF6; /* Fundal bej cald */
      margin: auto;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: relative;
      color: #2E2E2E;
    }
    .close-button {
      color: #aaa;
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close-button:hover,
    .close-button:focus {
      color: #2E2E2E;
      text-decoration: none;
      cursor: pointer;
    }
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #C7EDE6; /* Verde mentÄƒ */
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
      display: none; /* Ascuns implicit */
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="relative w-screen h-screen flex flex-col items-center justify-center">
  <!-- Mesajul de bun venit È™i introducere, conform discuÈ›iei -->
  <div class="absolute top-1/4 text-center px-4 z-10">
    <h1 class="text-3xl font-semibold text-gray-800">Bun venit Ã®n spaÈ›iul tÄƒu</h1>
    <p class="mt-4 text-lg max-w-md mx-auto italic opacity-90">
      LumiYE este o evadare din prezentul agitat. Un loc Ã®n care poÈ›i sÄƒ respiri, sÄƒ simÈ›i, sÄƒ fii.
    </p>
    <p class="mt-4 text-base max-w-sm mx-auto opacity-70">
      Fie cÄƒ vrei sÄƒ pÄƒstrezi o stare de bine sau sÄƒ descarci ceva ce te apasÄƒ, <strong>acum</strong> e momentul.
    </p>
  </div>

  <!-- Butonul central "soare" pentru a Ã®ncepe sesiunea -->
  <div id="sun" class="sun left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center text-white text-lg font-semibold cursor-pointer">
    <span id="sun-text">ğŸ™ï¸ Ãncepe Sesiunea</span>
  </div>

  <!-- Butoanele de navigare (planete), stilizate ca "glass-button" -->
  <a href="journal.html" class="glass-button absolute top-16 right-12 w-16 h-16">Jurnal</a>
  <a href="mygoals.html" class="glass-button absolute top-1/2 right-8 transform -translate-y-1/2 w-16 h-16">Obiective</a>
  <a href="reports.html" class="glass-button absolute bottom-24 left-12 w-16 h-16">Raport</a>
  <a href="history.html" class="glass-button absolute top-1/3 left-16 w-12 h-12">Istoric</a>

  <!-- Noul buton pentru inspiraÈ›ie rapidÄƒ cu Gemini API -->
  <button id="inspirationButton" class="glass-button absolute bottom-16 right-16 w-24 h-24 text-lg">âœ¨ InspiraÈ›ie</button>

  <!-- Egalizatorul È™i textul de stare (vizibile doar la Ã®nregistrare activÄƒ) -->
  <div id="rec-section" class="absolute bottom-6 w-full flex-col items-center z-10 text-sm">
    <div class="equalizer">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <p class="mt-2 text-center px-4" id="status-msg">
      Se memorizeazÄƒ starea ta actualÄƒ.<br />
      <span class="opacity-70 text-xs">AceastÄƒ memorizare va fi exclusiv Ã®n telefonul tÄƒu È™i Ã®n posesia ta.</span>
    </p>
  </div>

  <!-- Modal pentru afiÈ™area inspiraÈ›iei -->
  <div id="inspirationModal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="closeModalButton">&times;</span>
      <h2 class="text-xl font-semibold mb-4 text-center">âœ¨ InspiraÈ›ia Ta âœ¨</h2>
      <div id="loadingSpinner" class="loading-spinner"></div>
      <p id="inspirationText" class="text-gray-700 leading-relaxed text-center"></p>
    </div>
  </div>

  <script>
    const sun = document.getElementById('sun');
    const sunText = document.getElementById('sun-text');
    const recSection = document.getElementById('rec-section');
    const inspirationButton = document.getElementById('inspirationButton');
    const inspirationModal = document.getElementById('inspirationModal');
    const closeModalButton = document.getElementById('closeModalButton');
    const inspirationText = document.getElementById('inspirationText');
    const loadingSpinner = document.getElementById('loadingSpinner');

    let holdTimeout;
    let isRecording = false; // Stare pentru a È™ti dacÄƒ Ã®nregistrarea este activÄƒ

    // FuncÈ›ia pentru a Ã®ncepe animaÈ›ia È™i a pregÄƒti Ã®nregistrarea
    function startRecordingProcess() {
      sun.classList.add('expanding'); // ActiveazÄƒ animaÈ›ia de expansiune
      sunText.textContent = 'InspirÄƒ profund'; // SchimbÄƒ textul la "InspirÄƒ profund"

      // DupÄƒ 2 secunde, finalizeazÄƒ animaÈ›ia È™i pregÄƒteÈ™te UI-ul pentru Ã®nregistrare
      setTimeout(() => {
        sun.classList.remove('expanding'); // OpreÈ™te expansiunea
        sunText.textContent = 'ğŸ™ï¸'; // SchimbÄƒ textul la iconiÈ›a de microfon
        sun.classList.add('active'); // AdaugÄƒ clasa 'active' pentru a afiÈ™a egalizatorul
        recSection.style.display = 'flex'; // AfiÈ™eazÄƒ secÈ›iunea de Ã®nregistrare
        isRecording = true; // SeteazÄƒ starea de Ã®nregistrare la adevÄƒrat
        // Aici ar Ã®ncepe logica realÄƒ de Ã®nregistrare (Web Speech API, etc.)
        // Pentru MVP, aceasta este doar o simulare vizualÄƒ
        console.log("Ãncepe Ã®nregistrarea...");

        // RedirecÈ›ioneazÄƒ cÄƒtre pagina de jurnal dupÄƒ o scurtÄƒ Ã®ntÃ¢rziere
        setTimeout(() => {
          window.location.href = 'journal.html';
        }, 1000); // RedirecÈ›ioneazÄƒ dupÄƒ 1 secundÄƒ de la activare
      }, 2000); // AÈ™teaptÄƒ 2 secunde pentru animaÈ›ia "InspirÄƒ profund"
    }

    // AscultÄƒ evenimentul de apÄƒsare a butonului (mousedown)
    sun.addEventListener('mousedown', () => {
      // SeteazÄƒ un timeout pentru a detecta o apÄƒsare lungÄƒ (1.2 secunde)
      holdTimeout = setTimeout(startRecordingProcess, 1200);
    });

    // AnuleazÄƒ timeout-ul dacÄƒ butonul este eliberat prea repede
    sun.addEventListener('mouseup', () => {
      clearTimeout(holdTimeout);
    });
    // AnuleazÄƒ timeout-ul dacÄƒ mouse-ul pÄƒrÄƒseÈ™te zona butonului
    sun.addEventListener('mouseleave', () => {
      clearTimeout(holdTimeout);
    });

    // FuncÈ›ia pentru a genera inspiraÈ›ie folosind Gemini API
    async function generateInspiration() {
      inspirationText.textContent = ''; // CurÄƒÈ›Äƒ textul anterior
      loadingSpinner.style.display = 'block'; // AfiÈ™eazÄƒ spinner-ul
      inspirationModal.style.display = 'flex'; // AfiÈ™eazÄƒ modalul

      try {
        let chatHistory = [];
        const prompt = "GenereazÄƒ o frazÄƒ scurtÄƒ, pozitivÄƒ È™i inspiraÈ›ionalÄƒ despre auto-reflecÈ›ie, creÈ™tere personalÄƒ sau liniÈ™te interioarÄƒ. Fraza sÄƒ fie concisÄƒ È™i sÄƒ inspire calm.";
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        const apiKey = ""; // LÄƒsaÈ›i gol pentru ca Canvas sÄƒ furnizeze cheia API
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();

        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
          const text = result.candidates[0].content.parts[0].text;
          inspirationText.textContent = text;
        } else {
          inspirationText.textContent = "Nu am putut genera inspiraÈ›ie. Te rugÄƒm sÄƒ Ã®ncerci din nou.";
          console.error("Structura rÄƒspunsului API este neaÈ™teptatÄƒ:", result);
        }
      } catch (error) {
        inspirationText.textContent = "A apÄƒrut o eroare la generarea inspiraÈ›iei. VerificÄƒ conexiunea la internet.";
        console.error("Eroare la apelul Gemini API:", error);
      } finally {
        loadingSpinner.style.display = 'none'; // Ascunde spinner-ul
      }
    }

    // AscultÄƒ evenimentul de click pe butonul de inspiraÈ›ie
    inspirationButton.addEventListener('click', generateInspiration);

    // Ãnchide modalul la click pe butonul de Ã®nchidere
    closeModalButton.addEventListener('click', () => {
      inspirationModal.style.display = 'none';
    });

    // Ãnchide modalul la click Ã®n afara conÈ›inutului sÄƒu
    window.addEventListener('click', (event) => {
      if (event.target == inspirationModal) {
        inspirationModal.style.display = 'none';
      }
    });
  </script>
</body>
</html>
